<!-- Modal for User input name and location -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Log In</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label for="user-name" class="col-form-label">Name:</label>
                        <input type="text" class="form-control" id="user-name">
                    </div>
                    <div class="form-group">
                        <label for="user-email" class="col-form-label">Email:</label>
                        <input class="form-control" id="user-email"></textarea>
                    </div>

                    <!-- TEST SPACE FOR AUTOCOMPLETE -->
                    <div class="form-location">
                        <label for="user-email" class="col-form-label">Your Location:</label>
                        <input type="search" id="city" class="form-control" placeholder="Where are you located?" />

                        <script src="https://cdn.jsdelivr.net/npm/places.js@1.16.4"></script>
                        <script>
                            (function () {
                                var placesAutocomplete = places({
                                    appId: 'pl4TRIIAJFA1',
                                    apiKey: '959339ddd5da57ac40f40d81051bb8b5',
                                    container: document.querySelector('#city'),
                                    templates: {
                                        value: function (suggestion) {
                                            return suggestion.name;
                                        }
                                    }
                                }).configure({
                                    type: 'city',
                                    countries: 'us',
                                    aroundLatLngViaIP: false,
                                });
                            })();

                        </script>
                    </div>
                </form>


            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Submit</button>
            </div>
        </div>
    </div>
</div>
<!-- Modal for User Reviews -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Submit Your Review</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label>Name</label>
                        <input class="form-control" id="name" placeholder="Name">
                    </div>
                    <div class="form-group">
                        <label>Company</label>
                        <input class="form-control" id="company" placeholder="Company">
                    </div>
                    <div class="form-group">
                        <label>Rating</label>
                        <input class="form-control" id="rating" placeholder="Rating">
                    </div>
                    <div class="form-group">
                        <label>Pay</label>
                        <input class="form-control" id="pay" placeholder="Pay">
                    </div>
                    <div class="form-group">
                        <label>Location</label>
                        <input class="form-control" id="location" placeholder="Location">
                    </div>
                    <button type="submit" id="submitReview" class="btn btn-primary">Submit</button>
                </form>
            </div>

        </div>
    </div>
</div>


<div class="container pb-5" id='main-container'>


    <!-- beginning of search bar, filter, and review box -->
    <div class="row">
        <div class="col-sm-9 mt-5 ml-2">
            <div class="input-group md-form form-sm form-2 pl-0">
                <input class="form-control my-0 py-1 amber-border" type="text" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
                <div class="input-group-append">
                    <button type="button" class="btn btn-warning dropdown-toggle" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false">
                        Filter
                    </button>
                    <!-- <span class="input-group-text amber lighten-3" id="basic-text1"><i
                                    class="fa fa-bars text-grey" aria-hidden="true"></i></span> -->
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="#">Rating</a>
                        <a class="dropdown-item" href="#">Pay</a>
                        <!-- <a class="dropdown-item" href="#">Something else here</a> -->
                        <div class="dropdown-divider"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-2 mt-5">
            <button type="button" class="btn btn-outline-primary" data-toggle="modal" data-target="#exampleModal"
                id="userReview">
                Earn Points!
            </button>
            <!-- <button type="button" class="btn btn-outline-primary" id="userInput">Earn Points!</button> -->

            <div class="modal" id="exampleModal">

            </div>
            <!-- Modal -->
            <!-- <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                ...
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary">Save changes</button>
                            </div>
                        </div>
                    </div>
                </div> -->
        </div>
    </div>
    <!-- end of search bar, filter, and review box -->

    <!-- beginning of results -->
    <div class="row mt-5">
        <div class="col-sm-2 ml-5" style="background-color: grey;">
            <img src="https://via.placeholder.com/150">
        </div>
        <div class="col-sm-4 ml-2">
            <!-- <table border=0>
                    <td>Uber </td>
                    <tr>
                     <td>Row 2</td>
                   
                </table> -->

            <div class="container">
                <div class="row">
                    <div class="col-sm">
                        <div class="row mt-2" style="background-color: peachpuff;">
                            <div class="col-sm mini-box" id="companyName">NAME OF COMPANY</div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-sm mini-box" id="rating"><i class="fa fa-star"> </i> <i class="fa fa-star">
                                </i> <i class="fa fa-star"> </i></div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <div class="col-sm-2 ml-2" id="payBox">
            <button type="button" class="btn btn-outline-success text-dark">$</button>
        </div>
        <div class="col-sm-2 ml-2" id="linkBox">
            <div id="linkId">I am link</div>
        </div>
    </div>

    <div class="container" id="results">

    </div>




</div>



<script>
    $.ajax({
        url: "api/companies",
        type: "GET"
    }).then(function (dbCompanies) {
        console.log("saturday morning", dbCompanies)

        function comparePayPerHour(a, b) {
            return a.average_pay_per_hour - b.average_pay_per_hour;
        }

        var sortedCompanies = dbCompanies.sort(comparePayPerHour);
        console.log("sorted our companies :-)", sortedCompanies);
        for (var i = 0; i < 4; i++) {
            var titleh1 = $("<h1>")
            titleh1.text(sortedCompanies[i].company_name)
            console.log("about to apend to page", titleh1)
            $("#results").append(titleh1)
        }
    })


    < script src = "https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity = "sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin = "anonymous" ></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>